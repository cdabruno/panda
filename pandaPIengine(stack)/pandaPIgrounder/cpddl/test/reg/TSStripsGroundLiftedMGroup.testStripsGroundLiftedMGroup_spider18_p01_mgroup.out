{on V0:card C1:cardposition}:=1
 (on card-d0-s1-v2 discard) (on card-d0-s1-v2 pile-0) (on card-d0-s1-v2 pile-1) (on card-d0-s1-v2 pile-2):=1:fam:G
 (on card-d0-s3-v2 card-d0-s1-v2) (on card-d0-s3-v2 discard) (on card-d0-s3-v2 pile-0) (on card-d0-s3-v2 pile-1) (on card-d0-s3-v2 pile-2):=1:fam:G
 (on card-d0-s2-v2 card-d0-s2-v1) (on card-d0-s2-v2 discard) (on card-d0-s2-v2 pile-0) (on card-d0-s2-v2 pile-1) (on card-d0-s2-v2 pile-2):=1:fam:G
 (on card-d0-s2-v0 card-d0-s0-v1) (on card-d0-s2-v0 card-d0-s1-v1) (on card-d0-s2-v0 card-d0-s2-v1) (on card-d0-s2-v0 card-d0-s3-v1) (on card-d0-s2-v0 discard) (on card-d0-s2-v0 pile-0) (on card-d0-s2-v0 pile-1) (on card-d0-s2-v0 pile-2):=1:fam:G
 (on card-d0-s2-v1 card-d0-s0-v2) (on card-d0-s2-v1 card-d0-s1-v2) (on card-d0-s2-v1 card-d0-s2-v2) (on card-d0-s2-v1 card-d0-s3-v2) (on card-d0-s2-v1 discard) (on card-d0-s2-v1 pile-0) (on card-d0-s2-v1 pile-1) (on card-d0-s2-v1 pile-2):=1:fam:G
 (on card-d0-s0-v1 card-d0-s0-v2) (on card-d0-s0-v1 card-d0-s1-v2) (on card-d0-s0-v1 card-d0-s2-v0) (on card-d0-s0-v1 card-d0-s2-v2) (on card-d0-s0-v1 card-d0-s3-v2) (on card-d0-s0-v1 discard) (on card-d0-s0-v1 pile-0) (on card-d0-s0-v1 pile-1) (on card-d0-s0-v1 pile-2):=1:fam:G
 (on card-d0-s0-v0 card-d0-s0-v0) (on card-d0-s0-v0 card-d0-s0-v1) (on card-d0-s0-v0 card-d0-s0-v2) (on card-d0-s0-v0 card-d0-s1-v0) (on card-d0-s0-v0 card-d0-s1-v1) (on card-d0-s0-v0 card-d0-s1-v2) (on card-d0-s0-v0 card-d0-s2-v0) (on card-d0-s0-v0 card-d0-s2-v1) (on card-d0-s0-v0 card-d0-s2-v2) (on card-d0-s0-v0 card-d0-s3-v0) (on card-d0-s0-v0 card-d0-s3-v1) (on card-d0-s0-v0 card-d0-s3-v2) (on card-d0-s0-v0 discard) (on card-d0-s0-v0 pile-0) (on card-d0-s0-v0 pile-1) (on card-d0-s0-v0 pile-2):=1:fam:G
 (on card-d0-s0-v2 card-d0-s0-v0) (on card-d0-s0-v2 card-d0-s0-v1) (on card-d0-s0-v2 card-d0-s0-v2) (on card-d0-s0-v2 card-d0-s1-v0) (on card-d0-s0-v2 card-d0-s1-v1) (on card-d0-s0-v2 card-d0-s1-v2) (on card-d0-s0-v2 card-d0-s2-v0) (on card-d0-s0-v2 card-d0-s2-v1) (on card-d0-s0-v2 card-d0-s2-v2) (on card-d0-s0-v2 card-d0-s3-v0) (on card-d0-s0-v2 card-d0-s3-v1) (on card-d0-s0-v2 card-d0-s3-v2) (on card-d0-s0-v2 discard) (on card-d0-s0-v2 pile-0) (on card-d0-s0-v2 pile-1) (on card-d0-s0-v2 pile-2):=1:fam:G
 (on card-d0-s1-v0 card-d0-s0-v0) (on card-d0-s1-v0 card-d0-s0-v1) (on card-d0-s1-v0 card-d0-s0-v2) (on card-d0-s1-v0 card-d0-s1-v0) (on card-d0-s1-v0 card-d0-s1-v1) (on card-d0-s1-v0 card-d0-s1-v2) (on card-d0-s1-v0 card-d0-s2-v0) (on card-d0-s1-v0 card-d0-s2-v1) (on card-d0-s1-v0 card-d0-s2-v2) (on card-d0-s1-v0 card-d0-s3-v0) (on card-d0-s1-v0 card-d0-s3-v1) (on card-d0-s1-v0 card-d0-s3-v2) (on card-d0-s1-v0 discard) (on card-d0-s1-v0 pile-0) (on card-d0-s1-v0 pile-1) (on card-d0-s1-v0 pile-2):=1:fam:G
 (on card-d0-s1-v1 card-d0-s0-v0) (on card-d0-s1-v1 card-d0-s0-v1) (on card-d0-s1-v1 card-d0-s0-v2) (on card-d0-s1-v1 card-d0-s1-v0) (on card-d0-s1-v1 card-d0-s1-v1) (on card-d0-s1-v1 card-d0-s1-v2) (on card-d0-s1-v1 card-d0-s2-v0) (on card-d0-s1-v1 card-d0-s2-v1) (on card-d0-s1-v1 card-d0-s2-v2) (on card-d0-s1-v1 card-d0-s3-v0) (on card-d0-s1-v1 card-d0-s3-v1) (on card-d0-s1-v1 card-d0-s3-v2) (on card-d0-s1-v1 discard) (on card-d0-s1-v1 pile-0) (on card-d0-s1-v1 pile-1) (on card-d0-s1-v1 pile-2):=1:fam:G
 (on card-d0-s3-v1 card-d0-s0-v0) (on card-d0-s3-v1 card-d0-s0-v1) (on card-d0-s3-v1 card-d0-s0-v2) (on card-d0-s3-v1 card-d0-s1-v0) (on card-d0-s3-v1 card-d0-s1-v1) (on card-d0-s3-v1 card-d0-s1-v2) (on card-d0-s3-v1 card-d0-s2-v0) (on card-d0-s3-v1 card-d0-s2-v1) (on card-d0-s3-v1 card-d0-s2-v2) (on card-d0-s3-v1 card-d0-s3-v0) (on card-d0-s3-v1 card-d0-s3-v1) (on card-d0-s3-v1 card-d0-s3-v2) (on card-d0-s3-v1 deal-0) (on card-d0-s3-v1 discard) (on card-d0-s3-v1 pile-0) (on card-d0-s3-v1 pile-1) (on card-d0-s3-v1 pile-2):=1:fam:G
 (on card-d0-s3-v0 card-d0-s0-v0) (on card-d0-s3-v0 card-d0-s0-v1) (on card-d0-s3-v0 card-d0-s0-v2) (on card-d0-s3-v0 card-d0-s1-v0) (on card-d0-s3-v0 card-d0-s1-v1) (on card-d0-s3-v0 card-d0-s1-v2) (on card-d0-s3-v0 card-d0-s2-v0) (on card-d0-s3-v0 card-d0-s2-v1) (on card-d0-s3-v0 card-d0-s2-v2) (on card-d0-s3-v0 card-d0-s3-v0) (on card-d0-s3-v0 card-d0-s3-v1) (on card-d0-s3-v0 card-d0-s3-v2) (on card-d0-s3-v0 deal-1) (on card-d0-s3-v0 discard) (on card-d0-s3-v0 pile-0) (on card-d0-s3-v0 pile-1) (on card-d0-s3-v0 pile-2):=1:fam:G

{on V0:card C1:deal}
 (on card-d0-s3-v1 deal-0):fam
 (on card-d0-s3-v0 deal-1):fam

{current-deal C0:deal}:=1
 (current-deal deal-0) (current-deal deal-1) (current-deal deal-2):=1:fam

{on C1:card V0:card_or_tableau, clear V0:card_or_tableau}:=1
 (clear card-d0-s0-v0) (on card-d0-s0-v0 card-d0-s0-v0) (on card-d0-s0-v2 card-d0-s0-v0) (on card-d0-s1-v0 card-d0-s0-v0) (on card-d0-s1-v1 card-d0-s0-v0) (on card-d0-s3-v0 card-d0-s0-v0) (on card-d0-s3-v1 card-d0-s0-v0):=1:fam
 (clear card-d0-s1-v0) (on card-d0-s0-v0 card-d0-s1-v0) (on card-d0-s0-v2 card-d0-s1-v0) (on card-d0-s1-v0 card-d0-s1-v0) (on card-d0-s1-v1 card-d0-s1-v0) (on card-d0-s3-v0 card-d0-s1-v0) (on card-d0-s3-v1 card-d0-s1-v0):=1:fam
 (clear card-d0-s3-v0) (on card-d0-s0-v0 card-d0-s3-v0) (on card-d0-s0-v2 card-d0-s3-v0) (on card-d0-s1-v0 card-d0-s3-v0) (on card-d0-s1-v1 card-d0-s3-v0) (on card-d0-s3-v0 card-d0-s3-v0) (on card-d0-s3-v1 card-d0-s3-v0):=1:fam
 (clear card-d0-s0-v1) (on card-d0-s0-v0 card-d0-s0-v1) (on card-d0-s0-v2 card-d0-s0-v1) (on card-d0-s1-v0 card-d0-s0-v1) (on card-d0-s1-v1 card-d0-s0-v1) (on card-d0-s2-v0 card-d0-s0-v1) (on card-d0-s3-v0 card-d0-s0-v1) (on card-d0-s3-v1 card-d0-s0-v1):=1:fam
 (clear card-d0-s1-v1) (on card-d0-s0-v0 card-d0-s1-v1) (on card-d0-s0-v2 card-d0-s1-v1) (on card-d0-s1-v0 card-d0-s1-v1) (on card-d0-s1-v1 card-d0-s1-v1) (on card-d0-s2-v0 card-d0-s1-v1) (on card-d0-s3-v0 card-d0-s1-v1) (on card-d0-s3-v1 card-d0-s1-v1):=1:fam
 (clear card-d0-s2-v0) (on card-d0-s0-v0 card-d0-s2-v0) (on card-d0-s0-v1 card-d0-s2-v0) (on card-d0-s0-v2 card-d0-s2-v0) (on card-d0-s1-v0 card-d0-s2-v0) (on card-d0-s1-v1 card-d0-s2-v0) (on card-d0-s3-v0 card-d0-s2-v0) (on card-d0-s3-v1 card-d0-s2-v0):=1:fam
 (clear card-d0-s3-v1) (on card-d0-s0-v0 card-d0-s3-v1) (on card-d0-s0-v2 card-d0-s3-v1) (on card-d0-s1-v0 card-d0-s3-v1) (on card-d0-s1-v1 card-d0-s3-v1) (on card-d0-s2-v0 card-d0-s3-v1) (on card-d0-s3-v0 card-d0-s3-v1) (on card-d0-s3-v1 card-d0-s3-v1):=1:fam
 (clear card-d0-s0-v2) (on card-d0-s0-v0 card-d0-s0-v2) (on card-d0-s0-v1 card-d0-s0-v2) (on card-d0-s0-v2 card-d0-s0-v2) (on card-d0-s1-v0 card-d0-s0-v2) (on card-d0-s1-v1 card-d0-s0-v2) (on card-d0-s2-v1 card-d0-s0-v2) (on card-d0-s3-v0 card-d0-s0-v2) (on card-d0-s3-v1 card-d0-s0-v2):=1:fam
 (clear card-d0-s2-v1) (on card-d0-s0-v0 card-d0-s2-v1) (on card-d0-s0-v2 card-d0-s2-v1) (on card-d0-s1-v0 card-d0-s2-v1) (on card-d0-s1-v1 card-d0-s2-v1) (on card-d0-s2-v0 card-d0-s2-v1) (on card-d0-s2-v2 card-d0-s2-v1) (on card-d0-s3-v0 card-d0-s2-v1) (on card-d0-s3-v1 card-d0-s2-v1):=1:fam
 (clear card-d0-s2-v2) (on card-d0-s0-v0 card-d0-s2-v2) (on card-d0-s0-v1 card-d0-s2-v2) (on card-d0-s0-v2 card-d0-s2-v2) (on card-d0-s1-v0 card-d0-s2-v2) (on card-d0-s1-v1 card-d0-s2-v2) (on card-d0-s2-v1 card-d0-s2-v2) (on card-d0-s3-v0 card-d0-s2-v2) (on card-d0-s3-v1 card-d0-s2-v2):=1:fam
 (clear card-d0-s3-v2) (on card-d0-s0-v0 card-d0-s3-v2) (on card-d0-s0-v1 card-d0-s3-v2) (on card-d0-s0-v2 card-d0-s3-v2) (on card-d0-s1-v0 card-d0-s3-v2) (on card-d0-s1-v1 card-d0-s3-v2) (on card-d0-s2-v1 card-d0-s3-v2) (on card-d0-s3-v0 card-d0-s3-v2) (on card-d0-s3-v1 card-d0-s3-v2):=1:fam
 (clear card-d0-s1-v2) (on card-d0-s0-v0 card-d0-s1-v2) (on card-d0-s0-v1 card-d0-s1-v2) (on card-d0-s0-v2 card-d0-s1-v2) (on card-d0-s1-v0 card-d0-s1-v2) (on card-d0-s1-v1 card-d0-s1-v2) (on card-d0-s2-v1 card-d0-s1-v2) (on card-d0-s3-v0 card-d0-s1-v2) (on card-d0-s3-v1 card-d0-s1-v2) (on card-d0-s3-v2 card-d0-s1-v2):=1:fam
 (clear pile-0) (on card-d0-s0-v0 pile-0) (on card-d0-s0-v1 pile-0) (on card-d0-s0-v2 pile-0) (on card-d0-s1-v0 pile-0) (on card-d0-s1-v1 pile-0) (on card-d0-s1-v2 pile-0) (on card-d0-s2-v0 pile-0) (on card-d0-s2-v1 pile-0) (on card-d0-s2-v2 pile-0) (on card-d0-s3-v0 pile-0) (on card-d0-s3-v1 pile-0) (on card-d0-s3-v2 pile-0):=1:fam:G
 (clear pile-1) (on card-d0-s0-v0 pile-1) (on card-d0-s0-v1 pile-1) (on card-d0-s0-v2 pile-1) (on card-d0-s1-v0 pile-1) (on card-d0-s1-v1 pile-1) (on card-d0-s1-v2 pile-1) (on card-d0-s2-v0 pile-1) (on card-d0-s2-v1 pile-1) (on card-d0-s2-v2 pile-1) (on card-d0-s3-v0 pile-1) (on card-d0-s3-v1 pile-1) (on card-d0-s3-v2 pile-1):=1:fam:G
 (clear pile-2) (on card-d0-s0-v0 pile-2) (on card-d0-s0-v1 pile-2) (on card-d0-s0-v2 pile-2) (on card-d0-s1-v0 pile-2) (on card-d0-s1-v1 pile-2) (on card-d0-s1-v2 pile-2) (on card-d0-s2-v0 pile-2) (on card-d0-s2-v1 pile-2) (on card-d0-s2-v2 pile-2) (on card-d0-s3-v0 pile-2) (on card-d0-s3-v1 pile-2) (on card-d0-s3-v2 pile-2):=1:fam:G

{on C1:card V0:deal, clear V0:deal}:=1
 (clear deal-0) (on card-d0-s3-v1 deal-0):=1:fam:G
 (clear deal-1) (on card-d0-s3-v0 deal-1):=1:fam:G

{currently-dealing, NOT-currently-dealing}:=1
 (NOT-currently-dealing) (currently-dealing):=1:fam

{currently-collecting-deck, NOT-currently-collecting-deck}:=1
 (NOT-currently-collecting-deck) (currently-collecting-deck):=1:fam

{collect-card C0:cardposition, NOT-currently-collecting-deck}:=1
 (NOT-currently-collecting-deck) (collect-card card-d0-s0-v0) (collect-card card-d0-s0-v1) (collect-card card-d0-s0-v2) (collect-card card-d0-s1-v0) (collect-card card-d0-s1-v1) (collect-card card-d0-s1-v2) (collect-card card-d0-s2-v0) (collect-card card-d0-s2-v1) (collect-card card-d0-s2-v2) (collect-card card-d0-s3-v0) (collect-card card-d0-s3-v1) (collect-card card-d0-s3-v2):=1:fam

{currently-updating-unmovable, NOT-currently-updating-unmovable}:=1
 (NOT-currently-updating-unmovable) (currently-updating-unmovable):=1:fam

{make-unmovable C0:card, NOT-currently-updating-unmovable}:=1
 (NOT-currently-updating-unmovable) (make-unmovable card-d0-s0-v0) (make-unmovable card-d0-s0-v1) (make-unmovable card-d0-s0-v2) (make-unmovable card-d0-s1-v0) (make-unmovable card-d0-s1-v1) (make-unmovable card-d0-s1-v2) (make-unmovable card-d0-s2-v0) (make-unmovable card-d0-s2-v1) (make-unmovable card-d0-s2-v2) (make-unmovable card-d0-s3-v0) (make-unmovable card-d0-s3-v1) (make-unmovable card-d0-s3-v2):=1:fam

{currently-updating-movable, NOT-currently-updating-movable}:=1
 (NOT-currently-updating-movable) (currently-updating-movable):=1:fam

{make-movable C0:cardposition, NOT-currently-updating-movable}:=1
 (NOT-currently-updating-movable) (make-movable card-d0-s0-v0) (make-movable card-d0-s0-v1) (make-movable card-d0-s0-v2) (make-movable card-d0-s1-v0) (make-movable card-d0-s1-v1) (make-movable card-d0-s1-v2) (make-movable card-d0-s2-v0) (make-movable card-d0-s2-v1) (make-movable card-d0-s2-v2) (make-movable card-d0-s3-v0) (make-movable card-d0-s3-v1) (make-movable card-d0-s3-v2) (make-movable discard) (make-movable pile-0) (make-movable pile-1) (make-movable pile-2):=1:fam

